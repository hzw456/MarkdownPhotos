#从全球坐标系统到uber h3
##一、全球坐标系统
###1 坐标系
人们对地理位置表达的探索从来没有停止过，通常对于空间位置我们可以通过空间坐标系来对位置进行唯一的表达，最常用的空间坐标系有三种：
* 空间直角坐标系
* 柱面坐标系
* 球坐标系

根据不同的用途，选择相应的坐标系来表达空间位置。如下图，设M为空间内一点，其直角坐标为M(x,y,z)，点M在xoy面上的投影P的极坐标为r,θ，则r,θ,z就叫点M的柱面坐标。
![直角坐标系和柱面坐标系](https://github.com/sadnessly/MarkdownPhotos/raw/master/pic/342ac65c1038534304e1d15d9313b07eca8088a4.jpg)
球坐标系(r,θ,φ)定义了球体，它以坐标原点为参考点，由方位角、仰角和距离构成。如下图所示，即是一个球坐标系，r为距离，θ为仰角，φ为方位角。
![球坐标系](https://raw.githubusercontent.com/sadnessly/MarkdownPhotos/master/pic/86c0460e2f881850a75eac2f5e0b7d07.png)
同时，三种坐标系可以相互转换，如直角坐标和球坐标之间的转换：
* 直接坐标转球坐标
$${r}=\sqrt{x^2 + y^2 + z^2}$$

$${\theta}=\arctan \left( \frac{\sqrt{x^2 + y^2}}{z} \right)=\arccos \left( {\frac{z}{\sqrt{x^2 + y^2 + z^2}}} \right)$$

$${\phi}=\arctan \left( {\frac{y}{x}} \right) $$

* 球坐标转直角坐标

$$x=r \sin\theta \cos\phi$$

$$y=r \sin\theta \sin\phi$$

$$z=r \cos\theta$$

###2 地球坐标系
对于地球，地球的形状类似于一个椭球体，因此主要使用的坐标系则是直角坐标系和球坐标系。
####（1）地球直角坐标系
地球直角坐标系的定义是：原点O与地球质心重合，Z轴指向地球北极，X轴指向地球赤道面与格林尼治子午圈的交点，Y轴在赤道平面里与XOZ构成右手坐标系。
![enter image description here](https://github.com/sadnessly/MarkdownPhotos/raw/master/pic/7a899e510fb30f24acc736fbc295d143ac4b03ed.jpg)
####（2）地球大地坐标系
除了直角坐标外，由于地球是类球体，因此球坐标也是表达地球位置的直观和简洁的方式。地球大地坐标系就是一种特殊的球坐标系，
![enter image description here](https://github.com/sadnessly/MarkdownPhotos/raw/master/pic/86c0460e2f881850a75eac2f5e0b7d02.png)


用来表述地球上点的位置的一种地区坐标系统。它采用一个十分近似于地球自然形状的参考椭球作为描述和推算地面点位置和相互关系的基准面。
由于人类生活在地球表面，无需表达地球内部的点，因此仅需要表达地球球面上的点。在这里我们设球面坐标中距离即地球半径是一个固定值，只用方位角和仰角即经度和纬度就可以对地球表面的位置进行表达。

当我们需要在纸面或者屏幕上显示地球时，就需要将三维的球体转换为二维的平面。 对于球体来说，不能直接将球面完整和准确的展开在平面上，因此若要将地球展现在二维平面上，就需要某些损失精确度的方式来表达。

因此需要用投影的方式对地球进行展示。投影顾名思义，是用光线照射物体，在某个面上得到的影子，即把地球表面的任意点，利用一定数学法则，转换到地图平面上的理论和方法。书面概念化定义：地图投影就是指建立地球表面上的点与投影平面上点之间的一一对应关系的方法。即建立之间的数学转换公式。它将作为一个不可展平的曲面即地球表面投影到一个平面的基本方法，保证了空间信息在区域上的联系与完整。
然而对球表面进行投影就会带来一定的精度损失，如下图所示，这个投影过程将产生投影变形，而且不同的投影方法具有不同性质和大小的投影变形。根据投影变形的性质主要将变形分为面积、角度、长度。根据不同地图的绘制需求，选择相对合适的投影，保证地图的主要使用用途不因为变形而造成不可用。

因此根据投影面形状、位置等对地图投影进行分类：

（1）投影面和地轴的关系

正轴投影（投影面的中心线与地轴平行）
斜轴投影（投影面的中心线与地轴斜交）
横轴投影（投影面的中心线与地轴垂直）
（2）投影面和地球面的关系
切投影 (投影面和地球球面相切)
割投影 (投影面和地球球面相割)
圆锥投影 （投影中纬线为同心圆圆弧，经线为圆的半经）

圆柱投影 （投影中纬线为一组平行直线，经线为垂直于纬线的另一组平行直线，且两相邻经线之间的距离相等）

方位投影 （投影中纬线为同心圆，经线为圆的半径，且经线间的夹角等于地球面上相应的经差）

此外，还有伪圆锥投影，伪圆柱投影，伪方位投影，多圆锥投影等



如何将三维球体在变形较小的情况下表现在二维平面上就是相对困难的问题。常用的转换方式，比如将球体投影在圆柱、圆锥或是平面上，且根据所需不同的位置经度要求，可以选择变形相对较小的方式进行投影。如下图中的正轴圆柱投影（即墨卡托投影）在赤道附近的变形最小，即可以用此种投影表示赤道赤道附近的地区，这样的变形最小。而用这种投影方式表示地球两极不合适，会有很大的变形。



如下图的球心投影，是一种方位投影，光源在球心，而平面与球体有且仅有一个切点，将地球表面上的点投影在平面上。若计算球心点到地图的距离，则有计算公式：      

$${\displaystyle r(d)=R\,\tan {\frac {d}{R}}}$$

R为球心到切点的距离，即地球半径，而d代表球面上的点到投影点的距离，r为这两个点投影在平面的真实距离。



 